{% extends "inc/layout.html" %}

{% block title %}Локали — TeqCMS{% endblock %}

{% block content %}
<h1>Локали и язык сайта</h1>

<p><strong>TeqCMS</strong> поддерживает мультиязычные сайты с определением языка пользователя и fallback-механизмом. Все
    локали настраиваются в конфигурации и работают на уровне URL.</p>

<h2>1. Определение локали</h2>

<p>Локаль пользователя определяется по следующему приоритету:</p>
<ol>
    <li><strong>Префикс в URL</strong> — <code>/en/</code>, <code>/ru/</code> и т.д.</li>
    <li><strong>Заголовок <code>Accept-Language</code></strong> — если префикс не указан</li>
    <li><strong>Локаль по умолчанию</strong> — параметр <code>localeBaseDisplay</code></li>
</ol>

<p>Если URL не содержит допустимый префикс, CMS автоматически перенаправляет пользователя на путь с базовой локалью.</p>

<h2>2. Настройка доступных локалей</h2>

<p>Локали указываются через переменную окружения:</p>
<pre><code>TEQ_CMS_LOCALE_ALLOWED=en,ru,fr</code></pre>

<p>Базовая локаль для отображения:</p>
<pre><code>TEQ_CMS_LOCALE_BASE_DISPLAY=en</code></pre>

<p>Базовая локаль для переводов (например, оригинальные тексты на русском):</p>
<pre><code>TEQ_CMS_LOCALE_BASE_TRANSLATE=ru</code></pre>

<h2>3. Каталоги шаблонов</h2>

<p>Для каждой локали создаётся свой подкаталог:</p>
<pre><code>tmpl/web/
├── en/
│   └── index.html
├── ru/
│   └── index.html
</code></pre>

<p>Если нужный файл отсутствует в целевой локали, CMS использует версию из <code>localeBaseDisplay</code>.</p>

<h2>4. Переключение локали на сайте</h2>

<p>Для переключения языка можно использовать селектор с генерацией ссылок на <code>/en</code>, <code>/ru</code> и т.п.
    CMS всегда рендерит страницы в соответствии с URL-локалью, что делает поведение однозначным и предсказуемым.</p>

<p><a href="/{{ locale }}/docs/translate.html">Далее: механизм перевода страниц →</a></p>
{% endblock %}
