{% extends "inc/layout-v2.html" %}

{% block title %}Конфигурация — Документация v2{% endblock %}

{% block content %}
<h1>Конфигурация CMS</h1>
<p>Параметры задаются через переменные окружения и объект <code>configCms.init()</code>, что обеспечивает прозрачность и контроль поведения.</p>

<h2>1. Важные переменные</h2>
<pre><code># Тип сервера: express, fastify или встроенный
SERVER_TYPE=express
# Порт HTTP
SERVER_PORT=3000
# Движок шаблонов
TEQ_CMS_TMPL_ENGINE=nunjucks
# Разрешённые локали
TEQ_CMS_LOCALE_ALLOWED=en,ru
# Базовая локаль отображения
TEQ_CMS_LOCALE_BASE_DISPLAY=en
# Базовая локаль перевода
TEQ_CMS_LOCALE_BASE_TRANSLATE=ru
</code></pre>

<h2>2. Инициализация конфигурации</h2>
<pre><code>configCms.init({ /* параметры */ })</code></pre>

<h2>3. Логика работы</h2>
<ul>
    <li>При отсутствии префикса локали происходит редирект на базовую локаль.</li>
    <li>Переводы выполняются из базовой локали во все остальные.</li>
    <li>Шаблоны выбираются по текущей локали с резервом на базовую.</li>
</ul>

<h2>4. Замена компонентов</h2>
<p>Через DI можно подменять модули CMS, адаптируя систему под любую бизнес‑логику.</p>
{% endblock %}
